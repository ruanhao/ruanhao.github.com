<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Utils | Hao Ruan's 博客]]></title>
  <link href="http://ruanhao.github.io/blog/categories/utils/atom.xml" rel="self"/>
  <link href="http://ruanhao.github.io/"/>
  <updated>2017-08-20T00:02:12+08:00</updated>
  <id>http://ruanhao.github.io/</id>
  <author>
    <name><![CDATA[Hao Ruan]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[有趣的命令行（之网络）]]></title>
    <link href="http://ruanhao.github.io/blog/2017/08/19/command-kungfu-network/"/>
    <updated>2017-08-19T23:33:32+08:00</updated>
    <id>http://ruanhao.github.io/blog/2017/08/19/command-kungfu-network</id>
    <content type="html"><![CDATA[<ul>
  <li>扫描网段中的主机</li>
</ul>

<p><code>
nmap -sP 192.168.1.0/24  ## list alive hosts in specific subnet
</code></p>

<ul>
  <li>设置网卡速率</li>
</ul>

<p><code>
ethtool --change eth0 autoneg off speed 100 duplex full
</code></p>

<ul>
  <li>设置无线网卡速率</li>
</ul>

<p><code>
iwconfig eth1 rate 1Mb/s fixed
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[有趣的命令行（之系统信息）]]></title>
    <link href="http://ruanhao.github.io/blog/2017/08/19/command-kungfu-info/"/>
    <updated>2017-08-19T23:30:35+08:00</updated>
    <id>http://ruanhao.github.io/blog/2017/08/19/command-kungfu-info</id>
    <content type="html"><![CDATA[<ul>
  <li>挂载信息</li>
</ul>

<p><code>
mount | column -t
</code></p>

<ul>
  <li>块设备信息</li>
</ul>

<p><code>
lsblk -f
</code></p>

<ul>
  <li>内核模块目录</li>
</ul>

<p><code>
/lib/modules/$(uname -r)/kernel
</code></p>

<ul>
  <li>终端信息</li>
</ul>

<p><code>
tput longname
</code>
- 内核模块依赖关系</p>

<p><code>
lsmod | perl -e 'print "digraph \"lsmod\" {";&lt;&gt;;while(&lt;&gt;){@_=split/\s+/; print "\"$_[0]\" -&gt; \"$_\"\n" for split/,/,$_[3]}print "}"' | dot -Tpng | display -
</code>
- 磁盘信息</p>

<p><code>
file -s /dev/sd*
</code></p>

<ul>
  <li>操作系统位数</li>
</ul>

<p><code>
getconf LONG_BIT
getconf -a ## 显示所有信息
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[有趣的命令行（之调试）]]></title>
    <link href="http://ruanhao.github.io/blog/2017/08/19/command-kungfu-debug/"/>
    <updated>2017-08-19T23:28:13+08:00</updated>
    <id>http://ruanhao.github.io/blog/2017/08/19/command-kungfu-debug</id>
    <content type="html"><![CDATA[<ul>
  <li>截获进程的输入输出</li>
</ul>

<p><code>
strace -ff -e trace=write -e write=1,2 -p &lt;pid&gt;
</code></p>

<ul>
  <li>查看共享库依赖</li>
</ul>

<p><code>
ldd &lt;executable_file
</code></p>

<ul>
  <li>查看待写入磁盘数据大小</li>
</ul>

<p><code>
grep ^Dirty /proc/meminfo
</code></p>

<ul>
  <li>查看内存中数据</li>
</ul>

<p><code>
strings /dev/mem
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[有趣的命令行（之文件处理）]]></title>
    <link href="http://ruanhao.github.io/blog/2017/08/19/command-kungfu-file/"/>
    <updated>2017-08-19T23:17:14+08:00</updated>
    <id>http://ruanhao.github.io/blog/2017/08/19/command-kungfu-file</id>
    <content type="html"><![CDATA[<ul>
  <li>列出系统中打开的大文件</li>
</ul>

<p><code>
lsof / | awk '{ if($7 &gt; 1048576) print $7/1048576 "MB "$9 }' | sort -n -u | tail
</code></p>

<ul>
  <li>反向删除文件</li>
</ul>

<p><code>
rm !(*.foo|*.bar|*.baz)
</code></p>

<ul>
  <li>遍历文件</li>
</ul>

<p><code>
find -type f -name "*.txt" | while read f; do echo "i have $f"; done
</code></p>

<ul>
  <li>打包目录并传至远端服务器</li>
</ul>

<p><code>
tar -c &lt;dir&gt; | gzip | ssh user@remote 'dd of=dir.tar.gz'
tar -c &lt;dir&gt; | ssh -C user@remote 'cd /path &amp;&amp; tar -x -p'
</code></p>

<ul>
  <li>打包离散文件</li>
</ul>

<p><code>
find . -name '*.txt' | tar -c --files-from=- | bzip2 &gt; dir_txt.tar.bz2
</code></p>

<ul>
  <li>备份整个硬盘至远端服务器</li>
</ul>

<p><code>
dd bs=1M if=/dev/sda | gzip | ssh user@remote 'dd of=sda.gz'
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[有趣的命令行（之文本处理）]]></title>
    <link href="http://ruanhao.github.io/blog/2017/08/19/command-kungfu-text/"/>
    <updated>2017-08-19T18:21:13+08:00</updated>
    <id>http://ruanhao.github.io/blog/2017/08/19/command-kungfu-text</id>
    <content type="html"><![CDATA[<ul>
  <li>打印水平分隔符</li>
</ul>

<p><code>
printf '%100s\n' | tr ' ' =
</code></p>

<ul>
  <li>打印文件某一行</li>
</ul>

<p><code>
sed -n '1000p;1000q' &lt;filename&gt;
</code></p>

<ul>
  <li>打印文件某几行</li>
</ul>

<p><code>
sed -n '10,20p;20q' &lt;filename&gt;
</code></p>

<ul>
  <li>生成随机数</li>
</ul>

<p><code>
head -c4 /dev/urandom | od -An -tu4
</code></p>

<ul>
  <li>重复生成单词</li>
</ul>

<p><code>
echo hello{,,,}
</code></p>

<ul>
  <li>大小写转换</li>
</ul>

<p><code>
echo ${var^^}
echo ${var,,}
tr '[:lower:]' '[:upper:]'
</code></p>

<ul>
  <li>过滤不可打印字符</li>
</ul>

<p><code>
tr -dc '[:print:]' &lt;/dev/urandom
</code></p>

<ul>
  <li>查看字符的二进制表示</li>
</ul>

<p>```
echo ★  | hexdump -C</p>

<p>showkey -a
```</p>

<ul>
  <li>删除空行</li>
</ul>

<p><code>
grep .
awk NF
</code></p>

<ul>
  <li>删除前导空格</li>
</ul>

<p><code>
awk '{$1=$1}1' FILE
echo $line | xargs
</code></p>

<ul>
  <li>跳过文件首尾行</li>
</ul>

<p><code>
head file.txt               # 开始 10 行
tail file.txt               # 最后 10 行
head -n 20 file.txt         # 开始 20 行
tail -n 20 file.txt         # 最后 20 行
head -20 file.txt           # 开始 20 行
tail -20 file.txt           # 最后 20 行
head -n -5 file.txt         # 排除最后 5 行
tail -n +5 file.txt         # 从第 5 行开始到最后
</code></p>

<ul>
  <li>为 man 建立 pdf</li>
</ul>

<p><code>
man -t &lt;command&gt; | ps2pdf - &gt; filename.pdf
</code></p>
]]></content>
  </entry>
  
</feed>
