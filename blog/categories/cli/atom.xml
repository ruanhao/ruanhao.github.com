<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Cli | Hao Ruan's 部落格]]></title>
  <link href="http:///blog/categories/cli/atom.xml" rel="self"/>
  <link href="http:///"/>
  <updated>2017-08-02T22:39:18+08:00</updated>
  <id>http:///</id>
  <author>
    <name><![CDATA[Hao Ruan]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Ssh]]></title>
    <link href="http:///blog/2016/09/14/ssh/"/>
    <updated>2016-09-14T14:35:45+08:00</updated>
    <id>http:///blog/2016/09/14/ssh</id>
    <content type="html"><![CDATA[<h2 id="remote-forward">Remote Forward</h2>

<p><code>ssh -N -f -R &lt;remote-port&gt;:&lt;dest-host&gt;:&lt;dest-host-port&gt; user@remote-host</code></p>

<p><img src="/images/examples/ssh.png"></p>

<p>&lt;remote-port&gt; 监听在 localhost 上，如需要被外部访问，可以在 remote-host 上再添加一个端口转发:</p>

<p><code>socat TCP4-LISTEN:8888,reuseaddr,fork TCP4:127.0.0.1:&lt;remote-port&gt; &amp;</code></p>

<p>这样外部可以通过 &lt;remote-host&gt;:8888 访问 &lt;dest-host&gt;:&lt;dest-host-port&gt;</p>

<p><a href="http://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html">Ref1</a></p>

<p><a href="http://www.liugj.com/2013/04/SSH-port-forwarding/">Ref2</a></p>

<h2 id="misc">Misc</h2>

<ul>
  <li>在远程机器上运行一段脚本（不必把脚本拷贝到远程机器上)</li>
</ul>

<p><code>ssh user@server bash &lt; /path/to/local/script.sh</code></p>

<ul>
  <li>比较一个远程文件个一个本地文件</li>
</ul>

<p><code>ssh user@host cat /path/to/remotefile | diff /path/to/localfile -</code></p>

<ul>
  <li>cat 文件</li>
</ul>

<p><code>ssh user@host 'mkdir -p .ssh &amp;&amp; cat &gt;&gt; .ssh/authorized_keys' &lt; ~/.ssh/id_rsa.pub </code></p>

]]></content>
  </entry>
  
</feed>
